<link rel="import" href="../../../bower_components/polymer/polymer.html">

<!-- Include HERE Maps JS API -->
<script type="text/javascript" charset="UTF-8" src="http://js.api.here.com/v3/3.0/mapsjs-core.js"></script>
<script type="text/javascript" charset="UTF-8" src="http://js.api.here.com/v3/3.0/mapsjs-service.js"></script>
<script type="text/javascript" charset="UTF-8" src="http://js.api.here.com/v3/3.0/mapsjs-mapevents.js"></script>
<script type="text/javascript"  charset="UTF-8" src="http://js.api.here.com/v3/3.0/mapsjs-ui.js"></script>

<polymer-element name="here-map" attributes="center zoom app_id app_code map_layout height">
  <template>
    <link rel="stylesheet" type="text/css" href="http://js.api.here.com/v3/3.0/mapsjs-ui.css" />
    <style>
      #map.fixedHeight {
        width: 100%;
        height: {{height}}px;
        background: grey
      }

      #map.fullscreen {
        -moz-user-select: none;
        bottom: 0px;
        left: 0px;
        overflow: hidden;
        right: 0px;
        top: 0px;
        position: absolute;
      }
    </style>

    <div id="map" class="{{map_layout}}"></div>
  </template>
  
  <script>
    Polymer({
      center: { lat:52.5159, lng:13.3777 },
      zoom: 14,
      app_id: "",
      app_code: "",
      map_layout: "fullscreen",
      height: 400,

      ready: function() {
        this.platform = new H.service.Platform({
          app_id: this.app_id,
          app_code: this.app_code,
          useCIT: true
        });

        this.defaultLayers = this.platform.createDefaultLayers();

        this.map = new H.Map(this.$.map, this.defaultLayers.normal.map);
        this.behavior = new H.mapevents.Behavior(new H.mapevents.MapEvents(this.map));

        this.ui = H.ui.UI.createDefault(this.map, this.defaultLayers);

        this.map.setCenter(this.center);
        this.map.setZoom(this.zoom);
      }
    });
  </script>
</polymer-element>